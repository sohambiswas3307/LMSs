<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Quiz Result</title>
  <style>
    body { font-family: Arial, sans-serif; background-color: #f4f4f4; margin: 0; padding: 0; }
    .container { max-width: 800px; margin: 50px auto; background: #fff; padding: 20px; border-radius: 8px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
    h2 { text-align: center; color: #333; }
    table { width: 100%; border-collapse: collapse; margin-top: 20px; }
    table, th, td { border: 1px solid #ccc; }
    th, td { padding: 10px; text-align: left; }
    th { background: #eee; }
    .correct { color: green; font-weight: bold; }
    .incorrect { color: red; font-weight: bold; }
    .summary { margin-top: 20px; font-size: 16px; }
  </style>
</head>
<body>
  <div class="container">
    <h2>Quiz Result</h2>

    <div class="summary">
      <p><strong>Student:</strong> <%= user.full_name %></p>
      <p><strong>Score:</strong> <%= score %> / <%= total %></p>
      <p><strong>Time Taken:</strong> <%= timeTaken %> seconds</p>
      <p><strong>EXP Gained:</strong> <%= expGained %></p>
    </div>

    <h3>Question-wise Review</h3>
    <table>
      <thead>
        <tr>
          <th>#</th>
          <th>Question</th>
          <th>Your Answer</th>
          <th>Correct Answer</th>
          <th>Result</th>
        </tr>
      </thead>
      <tbody>
        <% questions.forEach((q, idx) => { %>
          <tr>
            <td><%= idx + 1 %></td>
            <td><%= q.question_text %></td>
            <td><%= q.selected %></td>
            <td><%= q.correct_option %></td>
            <td class="<%= q.isCorrect ? 'correct' : 'incorrect' %>">
              <%= q.isCorrect ? 'Correct' : 'Incorrect' %>
            </td>
          </tr>
        <% }) %>
      </tbody>
    </table>

    <div style="text-align:center; margin-top:20px;">
      <a href="/practice" style="text-decoration:none; color:white; background:#007bff; padding:10px 20px; border-radius:5px;">Back to Practice</a>
    </div>
  </div>
</body>
</html>
